--
-- PostgreSQL database dump
--

-- Dumped from database version 9.6.6
-- Dumped by pg_dump version 9.6.6

-- Started on 2018-03-05 11:06:11 MSK

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 2234 (class 1262 OID 16385)
-- Name: db_mx_blog; Type: DATABASE; Schema: -; Owner: mxblog
--

CREATE DATABASE db_mx_blog WITH TEMPLATE = template0 ENCODING = 'UTF8' LC_COLLATE = 'ru_RU.UTF-8' LC_CTYPE = 'ru_RU.UTF-8';


ALTER DATABASE db_mx_blog OWNER TO mxblog;

\connect db_mx_blog

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 1 (class 3079 OID 12393)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2236 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 186 (class 1259 OID 16390)
-- Name: catigories; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE catigories (
    key_catigories integer NOT NULL,
    name character varying(255),
    children integer DEFAULT 0 NOT NULL,
    seo_url character varying(255)
);


ALTER TABLE catigories OWNER TO mxblog;

--
-- TOC entry 200 (class 1259 OID 16496)
-- Name: catigories_key_catigories_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE catigories_key_catigories_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE catigories_key_catigories_seq OWNER TO mxblog;

--
-- TOC entry 2237 (class 0 OID 0)
-- Dependencies: 200
-- Name: catigories_key_catigories_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE catigories_key_catigories_seq OWNED BY catigories.key_catigories;


--
-- TOC entry 189 (class 1259 OID 16399)
-- Name: comments; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE comments (
    key_comment integer NOT NULL,
    user_id integer,
    date_comment date,
    on_moderation boolean DEFAULT false NOT NULL
);


ALTER TABLE comments OWNER TO mxblog;

--
-- TOC entry 201 (class 1259 OID 16511)
-- Name: comments_key_comment_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE comments_key_comment_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE comments_key_comment_seq OWNER TO mxblog;

--
-- TOC entry 2238 (class 0 OID 0)
-- Dependencies: 201
-- Name: comments_key_comment_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE comments_key_comment_seq OWNED BY comments.key_comment;


--
-- TOC entry 194 (class 1259 OID 16414)
-- Name: log; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE log (
    key_log bigint NOT NULL,
    date_log date,
    value_log character varying(1024)
);


ALTER TABLE log OWNER TO mxblog;

--
-- TOC entry 199 (class 1259 OID 16485)
-- Name: log_key_log_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE log_key_log_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE log_key_log_seq OWNER TO mxblog;

--
-- TOC entry 2239 (class 0 OID 0)
-- Dependencies: 199
-- Name: log_key_log_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE log_key_log_seq OWNED BY log.key_log;


--
-- TOC entry 185 (class 1259 OID 16387)
-- Name: posts; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE posts (
    title character varying(255),
    body_preview character varying(2500),
    body_addon character varying(10000),
    user_id integer,
    status_id integer,
    start_date date,
    access_level integer DEFAULT 5 NOT NULL,
    categories integer,
    tags integer,
    seo_url character varying(255),
    fixed boolean DEFAULT false NOT NULL,
    image_url character varying(255),
    key_post integer NOT NULL
);


ALTER TABLE posts OWNER TO mxblog;

--
-- TOC entry 198 (class 1259 OID 16474)
-- Name: posts_key_post_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE posts_key_post_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE posts_key_post_seq OWNER TO mxblog;

--
-- TOC entry 2240 (class 0 OID 0)
-- Dependencies: 198
-- Name: posts_key_post_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE posts_key_post_seq OWNED BY posts.key_post;


--
-- TOC entry 193 (class 1259 OID 16411)
-- Name: role_user; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE role_user (
    key_role_user integer NOT NULL,
    value character varying(15),
    description character varying(255)
);


ALTER TABLE role_user OWNER TO mxblog;

--
-- TOC entry 197 (class 1259 OID 16454)
-- Name: role_user_key_role_user_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE role_user_key_role_user_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE role_user_key_role_user_seq OWNER TO mxblog;

--
-- TOC entry 2241 (class 0 OID 0)
-- Dependencies: 197
-- Name: role_user_key_role_user_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE role_user_key_role_user_seq OWNED BY role_user.key_role_user;


--
-- TOC entry 191 (class 1259 OID 16405)
-- Name: session; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE session (
    user_id integer,
    session_id character varying(32),
    date_expired date,
    value_cookie character varying(32),
    last_ip character varying(15)
);


ALTER TABLE session OWNER TO mxblog;

--
-- TOC entry 190 (class 1259 OID 16402)
-- Name: setting; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE setting (
    parameter character varying(15) NOT NULL,
    value character varying(255),
    description character varying(512),
    key_setting integer NOT NULL
);


ALTER TABLE setting OWNER TO mxblog;

--
-- TOC entry 195 (class 1259 OID 16422)
-- Name: setting_key_setting_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE setting_key_setting_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE setting_key_setting_seq OWNER TO mxblog;

--
-- TOC entry 2242 (class 0 OID 0)
-- Dependencies: 195
-- Name: setting_key_setting_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE setting_key_setting_seq OWNED BY setting.key_setting;


--
-- TOC entry 192 (class 1259 OID 16408)
-- Name: status_post; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE status_post (
    key_status_post integer NOT NULL,
    parameter character varying(15),
    description character varying(255)
);


ALTER TABLE status_post OWNER TO mxblog;

--
-- TOC entry 202 (class 1259 OID 16520)
-- Name: status_post_key_status_post_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE status_post_key_status_post_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE status_post_key_status_post_seq OWNER TO mxblog;

--
-- TOC entry 2243 (class 0 OID 0)
-- Dependencies: 202
-- Name: status_post_key_status_post_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE status_post_key_status_post_seq OWNED BY status_post.key_status_post;


--
-- TOC entry 187 (class 1259 OID 16393)
-- Name: tags; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE tags (
);


ALTER TABLE tags OWNER TO mxblog;

--
-- TOC entry 188 (class 1259 OID 16396)
-- Name: users; Type: TABLE; Schema: public; Owner: mxblog
--

CREATE TABLE users (
    key_user integer NOT NULL,
    nick_name character varying(20),
    password character varying(32),
    email character varying(32),
    role integer,
    locked boolean DEFAULT false NOT NULL,
    date_create date,
    subscribe boolean DEFAULT true NOT NULL
);


ALTER TABLE users OWNER TO mxblog;

--
-- TOC entry 196 (class 1259 OID 16434)
-- Name: users_key_user_seq; Type: SEQUENCE; Schema: public; Owner: mxblog
--

CREATE SEQUENCE users_key_user_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE users_key_user_seq OWNER TO mxblog;

--
-- TOC entry 2244 (class 0 OID 0)
-- Dependencies: 196
-- Name: users_key_user_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: mxblog
--

ALTER SEQUENCE users_key_user_seq OWNED BY users.key_user;


--
-- TOC entry 2062 (class 2604 OID 16498)
-- Name: catigories key_catigories; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY catigories ALTER COLUMN key_catigories SET DEFAULT nextval('catigories_key_catigories_seq'::regclass);


--
-- TOC entry 2067 (class 2604 OID 16513)
-- Name: comments key_comment; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY comments ALTER COLUMN key_comment SET DEFAULT nextval('comments_key_comment_seq'::regclass);


--
-- TOC entry 2072 (class 2604 OID 16487)
-- Name: log key_log; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY log ALTER COLUMN key_log SET DEFAULT nextval('log_key_log_seq'::regclass);


--
-- TOC entry 2061 (class 2604 OID 16476)
-- Name: posts key_post; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY posts ALTER COLUMN key_post SET DEFAULT nextval('posts_key_post_seq'::regclass);


--
-- TOC entry 2071 (class 2604 OID 16456)
-- Name: role_user key_role_user; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY role_user ALTER COLUMN key_role_user SET DEFAULT nextval('role_user_key_role_user_seq'::regclass);


--
-- TOC entry 2069 (class 2604 OID 16424)
-- Name: setting key_setting; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY setting ALTER COLUMN key_setting SET DEFAULT nextval('setting_key_setting_seq'::regclass);


--
-- TOC entry 2070 (class 2604 OID 16522)
-- Name: status_post key_status_post; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY status_post ALTER COLUMN key_status_post SET DEFAULT nextval('status_post_key_status_post_seq'::regclass);


--
-- TOC entry 2064 (class 2604 OID 16436)
-- Name: users key_user; Type: DEFAULT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY users ALTER COLUMN key_user SET DEFAULT nextval('users_key_user_seq'::regclass);


--
-- TOC entry 2213 (class 0 OID 16390)
-- Dependencies: 186
-- Data for Name: catigories; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY catigories (key_catigories, name, children, seo_url) FROM stdin;
\.


--
-- TOC entry 2245 (class 0 OID 0)
-- Dependencies: 200
-- Name: catigories_key_catigories_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('catigories_key_catigories_seq', 1, false);


--
-- TOC entry 2216 (class 0 OID 16399)
-- Dependencies: 189
-- Data for Name: comments; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY comments (key_comment, user_id, date_comment, on_moderation) FROM stdin;
\.


--
-- TOC entry 2246 (class 0 OID 0)
-- Dependencies: 201
-- Name: comments_key_comment_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('comments_key_comment_seq', 1, false);


--
-- TOC entry 2221 (class 0 OID 16414)
-- Dependencies: 194
-- Data for Name: log; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY log (key_log, date_log, value_log) FROM stdin;
\.


--
-- TOC entry 2247 (class 0 OID 0)
-- Dependencies: 199
-- Name: log_key_log_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('log_key_log_seq', 1, false);


--
-- TOC entry 2212 (class 0 OID 16387)
-- Dependencies: 185
-- Data for Name: posts; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY posts (title, body_preview, body_addon, user_id, status_id, start_date, access_level, categories, tags, seo_url, fixed, image_url, key_post) FROM stdin;
\.


--
-- TOC entry 2248 (class 0 OID 0)
-- Dependencies: 198
-- Name: posts_key_post_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('posts_key_post_seq', 1, false);


--
-- TOC entry 2220 (class 0 OID 16411)
-- Dependencies: 193
-- Data for Name: role_user; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY role_user (key_role_user, value, description) FROM stdin;
1	admin	Full access
2	poster	Post access
3	reader	Only read
5	user	Read and write comment if enable setting blog
4	frend	Read and write comment VIP access
\.


--
-- TOC entry 2249 (class 0 OID 0)
-- Dependencies: 197
-- Name: role_user_key_role_user_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('role_user_key_role_user_seq', 5, true);


--
-- TOC entry 2218 (class 0 OID 16405)
-- Dependencies: 191
-- Data for Name: session; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY session (user_id, session_id, date_expired, value_cookie, last_ip) FROM stdin;
\.


--
-- TOC entry 2217 (class 0 OID 16402)
-- Dependencies: 190
-- Data for Name: setting; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY setting (parameter, value, description, key_setting) FROM stdin;
is_enable	true	Variant acess: true,false,password,filter	1
blog_name	MxBlog	Name your blog	2
reg_new_user	true	Enable registration user. Varian value: true,false	3
enable_comment	true	Enable comment to post. Varian: true,false,only_member,only_capcha	4
post_on_page	15	Coun post on start page	5
\.


--
-- TOC entry 2250 (class 0 OID 0)
-- Dependencies: 195
-- Name: setting_key_setting_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('setting_key_setting_seq', 5, true);


--
-- TOC entry 2219 (class 0 OID 16408)
-- Dependencies: 192
-- Data for Name: status_post; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY status_post (key_status_post, parameter, description) FROM stdin;
1	enable	Enable on site
2	disable	Disable on site
3	edit	Draft
\.


--
-- TOC entry 2251 (class 0 OID 0)
-- Dependencies: 202
-- Name: status_post_key_status_post_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('status_post_key_status_post_seq', 3, true);


--
-- TOC entry 2214 (class 0 OID 16393)
-- Dependencies: 187
-- Data for Name: tags; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY tags  FROM stdin;
\.


--
-- TOC entry 2215 (class 0 OID 16396)
-- Dependencies: 188
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: mxblog
--

COPY users (key_user, nick_name, password, email, role, locked, date_create, subscribe) FROM stdin;
\.


--
-- TOC entry 2252 (class 0 OID 0)
-- Dependencies: 196
-- Name: users_key_user_seq; Type: SEQUENCE SET; Schema: public; Owner: mxblog
--

SELECT pg_catalog.setval('users_key_user_seq', 1, false);


--
-- TOC entry 2076 (class 2606 OID 16510)
-- Name: catigories fk_catigories; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY catigories
    ADD CONSTRAINT fk_catigories PRIMARY KEY (key_catigories);


--
-- TOC entry 2084 (class 2606 OID 16519)
-- Name: comments fk_comment; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY comments
    ADD CONSTRAINT fk_comment PRIMARY KEY (key_comment);


--
-- TOC entry 2094 (class 2606 OID 16495)
-- Name: log fk_log; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY log
    ADD CONSTRAINT fk_log PRIMARY KEY (key_log);


--
-- TOC entry 2074 (class 2606 OID 16484)
-- Name: posts fk_posts; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY posts
    ADD CONSTRAINT fk_posts PRIMARY KEY (key_post);


--
-- TOC entry 2092 (class 2606 OID 16461)
-- Name: role_user fk_role_user; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY role_user
    ADD CONSTRAINT fk_role_user PRIMARY KEY (key_role_user);


--
-- TOC entry 2086 (class 2606 OID 16433)
-- Name: setting fk_setting; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY setting
    ADD CONSTRAINT fk_setting PRIMARY KEY (key_setting);


--
-- TOC entry 2090 (class 2606 OID 16527)
-- Name: status_post fk_status_post; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY status_post
    ADD CONSTRAINT fk_status_post PRIMARY KEY (key_status_post);


--
-- TOC entry 2078 (class 2606 OID 16449)
-- Name: users fk_user; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY users
    ADD CONSTRAINT fk_user PRIMARY KEY (key_user);


--
-- TOC entry 2080 (class 2606 OID 16453)
-- Name: users ui_email; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY users
    ADD CONSTRAINT ui_email UNIQUE (email);


--
-- TOC entry 2082 (class 2606 OID 16451)
-- Name: users ui_nick_name; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY users
    ADD CONSTRAINT ui_nick_name UNIQUE (nick_name);


--
-- TOC entry 2088 (class 2606 OID 16421)
-- Name: setting ui_param; Type: CONSTRAINT; Schema: public; Owner: mxblog
--

ALTER TABLE ONLY setting
    ADD CONSTRAINT ui_param UNIQUE (parameter);


-- Completed on 2018-03-05 11:06:12 MSK

--
-- PostgreSQL database dump complete
--

